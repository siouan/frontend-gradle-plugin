import{_ as L,u as q,a as H}from"./BkGJl2ZQ.js";import{_ as F}from"./BFqTcm4f.js";import{a as D,_ as f}from"./zck6Z6fF.js";import{_ as Z}from"./CxKyWrla.js";import{_ as Q}from"./DlAUqK2U.js";import{o as h,c as j,a as s,b as t,w as n,h as A,g,f as b,d as e,u as W}from"./0eoLPSdn.js";import{a as K,_ as ee}from"./COc4Puty.js";import{_ as x}from"./BHt_xBA0.js";import{_ as P,a as R,b as T}from"./B6j9K0o-.js";import{_ as I}from"./CtBl-4bT.js";import{_ as v}from"./DysKOmB8.js";import{_ as te}from"./GCGlyXyH.js";import{_ as ne}from"./BSZXaiZV.js";import{_ as ae,a as se,b as oe,c as ie,d as le,e as re}from"./abLuHPNq.js";import{_ as de}from"./dvIwE-KW.js";import{_ as ce}from"./DQimxJDu.js";import{_ as pe}from"./C-3WmzZG.js";import{_ as ue}from"./Bag9INXo.js";import{u as me}from"./abRkgXpJ.js";import"./D4IM-IFr.js";const _e={},he={viewBox:"0 0 640 440",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},ke=A('<g id="gradleTask"><rect width="120" height="30" fill="chartreuse" stroke="black" rx="3" ry="3"></rect></g><g id="frontendTask"><rect width="120" height="30" fill="cyan" stroke="black" rx="3" ry="3"></rect></g><g id="frontendTaskType"><rect width="100" height="30" fill="gainsboro" stroke="black" rx="3" ry="3"></rect></g><g id="cleanTask"><use xlink:href="#gradleTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem">clean</text></g><g id="checkTask"><use xlink:href="#gradleTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem">check</text></g><g id="assembleTask"><use xlink:href="#gradleTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem">assemble</text></g><g id="publishTask"><use xlink:href="#gradleTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem">publish</text></g><g id="installNodeTask"><use xlink:href="#frontendTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> installNode </text></g><g id="resolvePackageManagerTask"><use xlink:href="#frontendTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> resolvePackageManager </text></g><g id="installPackageManagerTask"><use xlink:href="#frontendTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> installPackageManager </text></g><g id="installFrontendTask"><use xlink:href="#frontendTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> installFrontend </text></g><g id="cleanFrontendTask"><use xlink:href="#frontendTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> cleanFrontend </text></g><g id="checkFrontendTask"><use xlink:href="#frontendTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> checkFrontend </text></g><g id="assembleFrontendTask"><use xlink:href="#frontendTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> assembleFrontend </text></g><g id="publishFrontendTask"><use xlink:href="#frontendTask"></use><text x="60" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> publishFrontend </text></g><g id="RunNodeTaskType"><use xlink:href="#frontendTaskType"></use><text x="50" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem">RunNode</text></g><g id="RunCorepackTaskType"><use xlink:href="#frontendTaskType"></use><text x="50" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem"> RunCorepack </text></g><g id="RunNpmTaskType"><use xlink:href="#frontendTaskType"></use><text x="50" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem">RunNpm</text></g><g id="RunPnpmTaskType"><use xlink:href="#frontendTaskType"></use><text x="50" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem">RunPnpm</text></g><g id="RunYarnTaskType"><use xlink:href="#frontendTaskType"></use><text x="50" y="16" dominant-baseline="middle" text-anchor="middle" font-size="0.6rem">RunYarn</text></g><marker id="arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse" fill="violet"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker>',21),fe={id:"gradleBasePlugin"},ge=s("rect",{x:"0",y:"0",width:"460",height:"70",fill:"none",stroke:"grey"},null,-1),ye=s("text",{x:"20",y:"18","font-size":"0.5rem",fill:"grey"},"Gradle Base plugin",-1),be=s("use",{x:"20",y:"30","xlink:href":"#cleanTask"},null,-1),xe=s("use",{x:"170",y:"30","xlink:href":"#checkTask"},null,-1),Te=s("use",{x:"320",y:"30","xlink:href":"#assembleTask"},null,-1),Fe=s("g",{id:"gradlePublishingPlugin"},[s("rect",{x:"480",y:"0",width:"160",height:"70",fill:"none",stroke:"grey"}),s("text",{"text-anchor":"end",x:"620",y:"18","font-size":"0.5rem",fill:"grey"},"Gradle Publishing plugin"),s("use",{x:"500",y:"30","xlink:href":"#publishTask"})],-1),ve={id:"frontendGradlePlugin"},we=s("rect",{x:"0",y:"80",width:"640",height:"360",fill:"none",stroke:"grey"},null,-1),Pe=s("text",{"text-anchor":"end",x:"620",y:"238","font-size":"0.5rem",fill:"grey"},"Frontend Gradle plugin",-1),Se=s("use",{x:"20",y:"90","xlink:href":"#cleanFrontendTask"},null,-1),De=s("use",{x:"170",y:"90","xlink:href":"#checkFrontendTask"},null,-1),$e=s("use",{x:"320",y:"90","xlink:href":"#assembleFrontendTask"},null,-1),Ce=s("use",{x:"500",y:"90","xlink:href":"#publishFrontendTask"},null,-1),Ge=s("use",{x:"170",y:"150","xlink:href":"#installFrontendTask"},null,-1),Le=s("use",{x:"170",y:"210","xlink:href":"#installPackageManagerTask"},null,-1),Re=s("use",{x:"170",y:"270","xlink:href":"#resolvePackageManagerTask"},null,-1),Ie=s("use",{x:"170",y:"330","xlink:href":"#installNodeTask"},null,-1),Me=s("line",{x1:"0",y1:"370",x2:"640",y2:"370",stroke:"gainsboro","stroke-dasharray":"4 2"},null,-1),Ne=s("text",{"text-anchor":"middle",x:"320",y:"388","font-size":"0.5rem",fill:"darkgrey"}," Additional task types ",-1),je=s("use",{x:"10",y:"400","xlink:href":"#RunNodeTaskType"},null,-1),Ae=s("use",{x:"140",y:"400","xlink:href":"#RunCorepackTaskType"},null,-1),ze=s("use",{x:"270",y:"400","xlink:href":"#RunNpmTaskType"},null,-1),Oe=s("use",{x:"400",y:"400","xlink:href":"#RunPnpmTaskType"},null,-1),Ee=s("use",{x:"530",y:"400","xlink:href":"#RunYarnTaskType"},null,-1),Ye=A('<use xlink:href="#gradleBasePlugin"></use><use xlink:href="#gradlePublishingPlugin"></use><use xlink:href="#frontendGradlePlugin"></use><line x1="80" y1="60" x2="80" y2="87" stroke="violet" marker-end="url(#arrow)"></line><line x1="230" y1="60" x2="230" y2="87" stroke="violet" marker-end="url(#arrow)"></line><line x1="380" y1="60" x2="380" y2="87" stroke="violet" marker-end="url(#arrow)"></line><line x1="560" y1="60" x2="560" y2="87" stroke="violet" marker-end="url(#arrow)"></line><path d="M 80 120 Q 80 133, 140 133 T 200 147" stroke="violet" fill="transparent" marker-end="url(#arrow)"></path><line x1="230" y1="120" x2="230" y2="147" stroke="violet" marker-end="url(#arrow)"></line><path d="M 380 120 Q 380 133, 320 133 T 260 147" stroke="violet" fill="transparent" marker-end="url(#arrow)"></path><line x1="500" y1="105" x2="443" y2="105" stroke="violet" marker-end="url(#arrow)"></line><line x1="230" y1="180" x2="230" y2="207" stroke="violet" marker-end="url(#arrow)"></line><line x1="230" y1="240" x2="230" y2="267" stroke="violet" marker-end="url(#arrow)"></line><line x1="230" y1="300" x2="230" y2="327" stroke="violet" marker-end="url(#arrow)"></line>',14);function Je(d,c){const p=F,r=D;return h(),j("svg",he,[s("defs",null,[ke,s("g",fe,[ge,ye,t(p,{path:"/current/userguide/base_plugin.html#sec:base_tasks"},{default:n(()=>[be]),_:1}),t(p,{path:"/current/userguide/base_plugin.html#sec:base_tasks"},{default:n(()=>[xe]),_:1}),t(p,{path:"/current/userguide/base_plugin.html#sec:base_tasks"},{default:n(()=>[Te]),_:1})]),Fe,s("g",ve,[we,Pe,t(r,{path:`${d.$config.public.paths.tasks}#cleanFrontend`},{default:n(()=>[Se]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#checkFrontend`},{default:n(()=>[De]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#assembleFrontend`},{default:n(()=>[$e]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#publishFrontend`},{default:n(()=>[Ce]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#installFrontend`},{default:n(()=>[Ge]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#installPackageManager`},{default:n(()=>[Le]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#resolvePackageManager`},{default:n(()=>[Re]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#installNode`},{default:n(()=>[Ie]),_:1},8,["path"]),Me,Ne,t(r,{path:`${d.$config.public.paths.tasks}#RunNode`},{default:n(()=>[je]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#RunCorepack`},{default:n(()=>[Ae]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#RunNpm`},{default:n(()=>[ze]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#RunPnpm`},{default:n(()=>[Oe]),_:1},8,["path"]),t(r,{path:`${d.$config.public.paths.tasks}#RunYarn`},{default:n(()=>[Ee]),_:1},8,["path"])])]),Ye])}const Ue=Q(_e,[["render",Je]]),Ve=g({__name:"install-node-task-v7",setup(d){const c=[{name:"nodeVersion",type:"S",binding:"P",property:"nodeVersion"},{name:"nodeDistributionUrlRoot",type:"S",binding:"P",property:"nodeDistributionUrlRoot"},{name:"nodeDistributionUrlPathPattern",type:"S",binding:"P",property:"nodeDistributionUrlPathPattern"},{name:"nodeInstallDirectory",type:"F",binding:"P",property:"nodeInstallDirectory"}],p=[{name:"nodeExecutableFile",type:"RF",binding:"C"}];return(r,l)=>{const a=L,o=x,i=f,u=K,_=P,m=R,k=I,w=T;return h(),b(w,{name:"installNode",inputs:c,outputs:p},{title:n(()=>[e("Install "),t(a)]),nodeExecutableFile:n(()=>[t(o,{name:"nodeInstallDirectory"}),t(i,null,{default:n(()=>[e("/node.exe")]),_:1}),e(" or "),t(o,{name:"nodeInstallDirectory"}),t(i,null,{default:n(()=>[e("/bin/node")]),_:1}),e(" depending on the O/S. ")]),skipConditions:n(()=>[e(" property "),t(o,{name:"nodeDistributionProvided"}),e(" is "),t(i,null,{default:n(()=>[e("true")]),_:1}),e(". ")]),description:n(()=>[s("p",null,[e(" The task downloads a "),t(a),e(" distribution, verifies its integrity, and installs it in the directory pointed by the "),t(o,{name:"nodeInstallDirectory"}),e(" property. The URL used to download the distribution is resolved using the "),t(o,{name:"nodeDistributionUrlRoot"}),e(" property and the "),t(o,{name:"nodeDistributionUrlPathPattern"}),e(" property. Checking the distribution integrity consists of downloading a file providing the distribution shasum. This file is expected to be in the same remote web directory than the distribution archive. For example, if the distribution is located at "),t(i,null,{default:n(()=>[e("https://nodejs.org/dist/vX.Y.Z/node-vX.Y.Z-win-x64.zip")]),_:1}),e(", the plugin attempts to download the shasum file located at "),t(i,null,{default:n(()=>[e("https://nodejs.org/dist/vX.Y.Z/SHASUMS256.txt")]),_:1}),e(". By default, the plugin relies on the VM "),t(u,null,{default:n(()=>[e("network properties")]),_:1}),e(" to know if a proxy server shall be used when downloading the distribution and the shasum. A custom proxy server may also be used by defining "),t(o,{name:"httpsProxyHost"}),e(" property (respectively "),t(o,{name:"httpProxyHost"}),e(" property) if the "),t(o,{name:"nodeDistributionUrlRoot"}),e(" property uses the "),t(i,null,{default:n(()=>[e("https")]),_:1}),e(" protocol (resp. uses the "),t(i,null,{default:n(()=>[e("http")]),_:1}),e(" protocol). ")]),s("p",null,[e(" If a "),t(a),e(" distribution is already installed in the system - either as a global installation or as an installation performed by another Gradle (sub-)project - and shall be used instead of a downloaded distribution, take a look at the "),t(o,{name:"nodeDistributionProvided"}),e(" property instead: when "),t(i,null,{default:n(()=>[e("true")]),_:1}),e(", this task is ignored if invoked during a Gradle build, and its outcome will always be "),t(_,{outcome:"SKIPPED"}),e(". ")]),s("p",null,[e(" The task takes advantage of "),t(m,{path:"/performance/#incremental_build"},{default:n(()=>[e("Gradle incremental build")]),_:1}),e(", and is not executed again unless one of its inputs/outputs changed. Consequently, if the task takes part of a Gradle build, its outcome will be "),t(_,{outcome:"UP-TO-DATE"}),e(". ")]),t(k,null,{default:n(()=>[e(" This task should not be executed directly. Gradle executes it if the build requires it. ")]),_:1})]),_:1})}}}),Be=g({__name:"resolve-package-manager-task-v7",setup(d){const c=[{name:"packageJsonFile",type:"RF",binding:"C"},{name:"nodeInstallDirectory",type:"F",binding:"P",property:"nodeInstallDirectory"}],p=[{name:"packageManagerSpecificationFile",type:"RF",binding:"C"},{name:"packageManagerExecutablePathFile",type:"RF",binding:"C"}];return(r,l)=>{const a=x,o=f,i=L,u=R,_=P,m=I,k=T;return h(),b(k,{name:"resolvePackageManager",inputs:c,outputs:p,cacheable:""},{title:n(()=>[e("Resolve package manager")]),packageJsonFile:n(()=>[t(a,{name:"packageJsonDirectory"}),t(o,null,{default:n(()=>[e("/package.json")]),_:1})]),packageManagerSpecificationFile:n(()=>[t(a,{name:"cacheDirectory"}),t(o,null,{default:n(()=>[e("/resolvePackageManager/package-manager-specification.txt")]),_:1})]),packageManagerExecutablePathFile:n(()=>[t(a,{name:"cacheDirectory"}),t(o,null,{default:n(()=>[e("/resolvePackageManager/package-manager-executable-path.txt")]),_:1})]),skipConditions:n(()=>[t(a,{name:"packageJsonDirectory"}),t(o,null,{default:n(()=>[e("/package.json")]),_:1}),e(" file does not exist. ")]),description:n(()=>[s("p",null,[e(" The task identifies the name and the version of the package manager applicable to the project by parsing the "),t(i,{path:"/api/packages.html#packagemanager",label:"packageManager"}),e(" property located in the "),t(o,null,{default:n(()=>[e("package.json")]),_:1}),e(" file (pointed by the "),t(a,{name:"packageJsonDirectory"}),e(" property). For example, if the "),t(o,null,{default:n(()=>[e("package.json")]),_:1}),e(" file contains "),t(o,null,{default:n(()=>[e('"packageManager": "npm@9.6.7"')]),_:1}),e(", the task resolves "),t(o,null,{default:n(()=>[e("npm")]),_:1}),e(" as the name of the package manager, and "),t(o,null,{default:n(()=>[e("9.6.7")]),_:1}),e(" as its version. ")]),s("p",null,[e(" The task takes advantage of "),t(u,{path:"/performance/#incremental_build"},{default:n(()=>[e("Gradle incremental build")]),_:1}),e(", and is not executed again unless one of its inputs/outputs changed. Consequently, if the task takes part of a Gradle build, its outcome will be "),t(_,{outcome:"UP-TO-DATE"}),e(". ")]),t(m,null,{default:n(()=>[e(" This task should not be executed directly. Gradle executes it if the build requires it. ")]),_:1})]),_:1})}}}),Xe=g({__name:"install-package-manager-task-v7",setup(d){const c=[{name:"packageManagerSpecificationFile",type:"RF",binding:"C"}],p=[{name:"packageManagerExecutableFile",type:"RF",binding:"C"}];return(r,l)=>{const a=x,o=f,i=v,u=R,_=P,m=I,k=T;return h(),b(k,{name:"installPackageManager",inputs:c,outputs:p},{title:n(()=>[e("Install package manager")]),packageManagerSpecificationFile:n(()=>[t(a,{name:"cacheDirectory"}),t(o,null,{default:n(()=>[e("/resolvePackageManager/package-manager-specification.txt")]),_:1})]),packageManagerExecutableFile:n(()=>[t(a,{name:"nodeInstallDirectory"}),t(o,null,{default:n(()=>[e("/[npm|pnpm|yarn].cmd")]),_:1}),e(" or "),t(a,{name:"nodeInstallDirectory"}),t(o,null,{default:n(()=>[e("/bin/[npm|pnpm|yarn]")]),_:1}),e(" depending on the O/S. ")]),skipConditions:n(()=>[e(" file "),t(a,{name:"cacheDirectory"}),t(o,null,{default:n(()=>[e("/resolvePackageManager/package-manager-executable-path.txt")]),_:1}),e(" does not exist. ")]),description:n(()=>[s("p",null,[e(" The task installs the package manager resolved with task "),t(i,{name:"resolvePackageManager"}),e(", by executing command "),t(o,null,{default:n(()=>[e("corepack enable <package-manager>")]),_:1}),e(". ")]),s("p",null,[e(" The task takes advantage of "),t(u,{path:"/performance/#incremental_build"},{default:n(()=>[e("Gradle incremental build")]),_:1}),e(", and is not executed again unless one of its inputs/outputs changed. Consequently, if the task takes part of a Gradle build, its outcome will be "),t(_,{outcome:"UP-TO-DATE"}),e(". ")]),t(m,null,{default:n(()=>[e(" This task should not be executed directly. Gradle executes it if the build requires it. ")]),_:1})]),_:1})}}}),qe={class:"card my-3"},He={class:"card-body"},Ze={class:"card-title"},Qe={class:"card-text"},We=s("span",{class:"font-italic"},"by default",-1),Ke=g({__name:"install-frontend-task-v7",setup(d){const c=[{name:"packageJsonDirectory",type:"F",binding:"P",property:"packageJsonDirectory"},{name:"nodeInstallDirectory",type:"F",binding:"P",property:"nodeInstallDirectory"},{name:"script",type:"S",binding:"P",property:"installScript"}];return(p,r)=>{const l=x,a=f,o=L,i=F,u=P,_=v,m=te,k=ne,w=ae,$=de,S=ce,C=D,G=T;return h(),b(G,{name:"installFrontend",inputs:c},{title:n(()=>[e("Install frontend dependencies")]),skipConditions:n(()=>[e(" file "),t(l,{name:"cacheDirectory"}),t(a,null,{default:n(()=>[e("/resolvePackageManager/package-manager-specification.txt")]),_:1}),e(" does not exist. ")]),description:n(()=>[s("p",null,[e(" Depending on the package manager, this task executes either command "),t(a,null,{default:n(()=>[e("npm install")]),_:1}),e(", or command "),t(a,null,{default:n(()=>[e("pnpm install")]),_:1}),e(", or command "),t(a,null,{default:n(()=>[e("yarn install")]),_:1}),e(", by default. Consequently, the command shall install project dependencies according to the algorithm followed by each package manager (see hereafter). Optionally, this command may be customized with the "),t(l,{name:"installScript"}),e(" property (e.g. to run a "),t(a,null,{default:n(()=>[e("npm ci")]),_:1}),e(" command instead). On a developer workstation, executing this task is a good starting point to setup a workspace for development as it will install the "),t(o),e(" distribution (if not provided) as well as dependencies. ")]),s("div",qe,[s("div",He,[s("h5",Ze,[e(" About "),t(i,{path:"/current/userguide/incremental_build.html"},{default:n(()=>[e("incremental build")]),_:1}),e(" and up-to-date checks ")]),s("div",Qe,[s("p",null,[e(" If you execute this task several times in a row, you may notice the "),t(a,null,{default:n(()=>[e("npm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("pnpm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("yarn")]),_:1}),e(" command is always executed: Gradle does not reuse task outputs based on a previous execution with the "),t(u,{outcome:"SUCCESS"}),e(" outcome. This is the expected behaviour "),We,e(" because the task does not declare any relevant input(s) and output(s) Gradle could track to know the task is already "),t(u,{outcome:"UP-TO-DATE"}),e(" (e.g. unlike the "),t(_,{name:"installNode"}),e(" task). Resolving these inputs/outputs is a bit complex, since it depends on the package manager, the value of the "),t(l,{name:"installScript"}),e(" property, and the files present in the project. That's why incremental build for this task is not available out-of-the-box by now. However, some "),t(m,{path:"/tree/main/examples"},{default:n(()=>[e("examples")]),_:1}),e(" provide guidelines to customize this task and limit executions under certain circumstances. Notes hereafter provide also some unofficial ideas: ")]),s("ul",null,[s("li",null,[t(k),e(": inputs may be one or more of files "),t(a,null,{default:n(()=>[e("package.json")]),_:1}),e(", "),t(a,null,{default:n(()=>[e("npm-shrinkwrap.json")]),_:1}),e(", "),t(a,null,{default:n(()=>[e("package-lock.json")]),_:1}),e(", "),t(a,null,{default:n(()=>[e("yarn.lock")]),_:1}),e(", while outputs may be the "),t(a,null,{default:n(()=>[e("node_modules")]),_:1}),e(" directory and the "),t(a,null,{default:n(()=>[e("package-lock.json")]),_:1}),e(" file (see "),t(w,{path:"/cli/v10/commands/npm-install"},{default:n(()=>[e("npm install")]),_:1}),e("). If the "),t(l,{name:"installScript"}),e(" property is set with "),t(a,null,{default:n(()=>[e("ci")]),_:1}),e(", files "),t(a,null,{default:n(()=>[e("npm-shrinkwrap.json")]),_:1}),e(" and "),t(a,null,{default:n(()=>[e("package-lock.json")]),_:1}),e(" may be the only possible input file, if one or the other exists, and the "),t(a,null,{default:n(()=>[e("node_modules")]),_:1}),e(" directory the only output. ")]),s("li",null,[t($),e(": inputs may be one or more of files "),t(a,null,{default:n(()=>[e("package.json")]),_:1}),e(", "),t(a,null,{default:n(()=>[e("pnpm-lock.yaml")]),_:1}),e(", while outputs may be the "),t(a,null,{default:n(()=>[e("node_modules")]),_:1}),e(" directory and the "),t(a,null,{default:n(()=>[e("pnpm-lock.yaml")]),_:1}),e(" file. ")]),s("li",null,[t(S),e(": inputs may be one or more of files "),t(a,null,{default:n(()=>[e("package.json")]),_:1}),e(", "),t(a,null,{default:n(()=>[e("yarn.lock")]),_:1}),e(", while outputs may be the "),t(a,null,{default:n(()=>[e("node_modules")]),_:1}),e(" directory, or the "),t(a,null,{default:n(()=>[e(".pnp.cjs")]),_:1}),e(" file and the "),t(a,null,{default:n(()=>[e(".yarn/cache")]),_:1}),e(" directory ("),t(S,{label:"Zero-installs",title:"Zero-Install feature"}),e("), and the "),t(a,null,{default:n(()=>[e("yarn.lock")]),_:1}),e(" file. ")])]),s("p",null,[e(" If you are about to tweak this task to declare additional inputs and outputs, take a look at these "),t(C,{path:`${p.$config.public.paths.tasks}#tweaking-tasks`},{default:n(()=>[e("recommendations")]),_:1},8,["path"]),e(". ")])])])])]),_:1})}}}),et=g({__name:"clean-frontend-task-v7",setup(d){const c=[{name:"packageJsonDirectory",type:"F",binding:"P",property:"packageJsonDirectory"},{name:"nodeInstallDirectory",type:"F",binding:"P",property:"nodeInstallDirectory"},{name:"script",type:"S",binding:"P",property:"cleanScript"}];return(p,r)=>{const l=x,a=f,o=v,i=F,u=T;return h(),b(u,{name:"cleanFrontend",inputs:c},{title:n(()=>[e("Clean frontend artifacts")]),skipConditions:n(()=>[e(" property "),t(l,{name:"cleanScript"}),e(" is not "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(". ")]),description:n(()=>[s("p",null,[e(" This task does nothing by default, considering frontend artifacts (minimified Javascript, CSS, HTML files...) are generated in the "),t(a,null,{default:n(()=>[e("${project.buildDir}")]),_:1}),e(" directory. If it is not the case, this task may be useful to clean the relevant directory. A clean script shall be defined in the "),t(a,null,{default:n(()=>[e("package.json")]),_:1}),e(" file, and the "),t(l,{name:"cleanScript"}),e(" property shall be set with the corresponding "),t(a,null,{default:n(()=>[e("npm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("pnpm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("yarn")]),_:1}),e(" command. This task depends on the "),t(o,{name:"installFrontend"}),e(" task, and is skipped if the "),t(l,{name:"cleanScript"}),e(" property is "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(". Apart from direct execution, the task is also executed when the Gradle lifecycle "),t(i,{path:"/current/userguide/base_plugin.html#sec:base_tasks"},{default:n(()=>[e("clean")]),_:1}),e(" task is executed. ")])]),_:1})}}}),tt={class:"card my-3"},nt={class:"card-body"},at=s("h5",{class:"card-title"},"About task execution and up-to-date checks",-1),st={class:"card-text"},ot=g({__name:"assemble-frontend-task-v7",setup(d){const c=[{name:"packageJsonDirectory",type:"F",binding:"P",property:"packageJsonDirectory"},{name:"nodeInstallDirectory",type:"F",binding:"P",property:"nodeInstallDirectory"},{name:"script",type:"S",binding:"P",property:"assembleScript"}];return(p,r)=>{const l=x,a=f,o=v,i=F,u=P,_=D,m=T;return h(),b(m,{name:"assembleFrontend",inputs:c},{title:n(()=>[e("Assemble frontend artifacts")]),skipConditions:n(()=>[e(" property "),t(l,{name:"assembleScript"}),e(" is not "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(". ")]),description:n(()=>[e(" This task allows to execute a build script as part of a Gradle build. The build script shall be defined in the "),t(a,null,{default:n(()=>[e("package.json")]),_:1}),e(" file, and the "),t(l,{name:"assembleScript"}),e(" property shall be set with the corresponding "),t(a,null,{default:n(()=>[e("npm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("pnpm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("yarn")]),_:1}),e(" command. This task depends on the "),t(o,{name:"installFrontend"}),e(" task, and is skipped if the "),t(l,{name:"assembleScript"}),e(" property is "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(". Apart from direct execution, the task is also executed when the Gradle lifecycle "),t(i,{path:"/current/userguide/base_plugin.html#sec:base_tasks"},{default:n(()=>[e("assemble")]),_:1}),e(" task is executed. "),s("div",tt,[s("div",nt,[at,s("p",st,[e(" If you execute this task several times in a row, you may notice the "),t(a,null,{default:n(()=>[e("npm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("pnpm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("yarn")]),_:1}),e(" command is always executed: Gradle does not skip the task based on a previous execution with the "),t(u,{outcome:"SUCCESS"}),e(" outcome. This is the expected behaviour because the task does not declare any input/output Gradle could track, to know the task is already "),t(u,{outcome:"UP-TO-DATE"}),e(" (e.g. unlike task "),t(o,{name:"installNode"}),e("). The task provides the ability to plug the developer's own Javascript build process to Gradle, and nothing more. Every Javascript build process is unique: it depends on the project, the languages involved (e.g. TypeScript, JSX, ECMA script, SASS, SCSS...), the directory layout, the build utilities (Webpack...), etc., chosen by the team. Moreover, some build utilities are already able to build artifacts incrementally. The plugin does not duplicate this logic. If you are about to tweak this task, take a look at these "),t(_,{path:`${p.$config.public.paths.tasks}#tweaking-tasks`},{default:n(()=>[e("recommendations")]),_:1},8,["path"]),e(". ")])])])]),_:1})}}}),it=g({__name:"check-frontend-task-v7",setup(d){const c=[{name:"packageJsonDirectory",type:"F",binding:"P",property:"packageJsonDirectory"},{name:"nodeInstallDirectory",type:"F",binding:"P",property:"nodeInstallDirectory"},{name:"script",type:"S",binding:"P",property:"checkScript"}];return(p,r)=>{const l=x,a=f,o=v,i=F,u=T;return h(),b(u,{name:"checkFrontend",inputs:c},{title:n(()=>[e("Check frontend application")]),skipConditions:n(()=>[e(" property "),t(l,{name:"checkScript"}),e(" is not "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(". ")]),description:n(()=>[s("p",null,[e(" This task may be used to integrate a check script into a Gradle build. The check script shall be defined in the "),t(a,null,{default:n(()=>[e("package.json")]),_:1}),e(" file, and the "),t(l,{name:"checkScript"}),e(" property shall be set with the corresponding "),t(a,null,{default:n(()=>[e("npm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("pnpm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("yarn")]),_:1}),e(" command. A typical check script may lint source files, execute tests, and/or perform additional analysis actions. This task depends on the "),t(o,{name:"installFrontend"}),e(" task, and is skipped if the "),t(l,{name:"checkScript"}),e(" property is "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(". Apart from direct execution, the task is also executed when the Gradle lifecycle "),t(i,{path:"/current/userguide/base_plugin.html#sec:base_tasks"},{default:n(()=>[e("check")]),_:1}),e(" task is executed. ")])]),_:1})}}}),lt=g({__name:"publish-frontend-task-v7",setup(d){const c=[{name:"packageJsonDirectory",type:"F",binding:"P",property:"packageJsonDirectory"},{name:"nodeInstallDirectory",type:"F",binding:"P",property:"nodeInstallDirectory"},{name:"script",type:"S",binding:"P",property:"publishScript"}];return(p,r)=>{const l=x,a=f,o=v,i=T;return h(),b(i,{name:"publishFrontend",inputs:c},{title:n(()=>[e("Publish frontend artifacts")]),skipConditions:n(()=>[e(" property "),t(l,{name:"assembleScript"}),e(" is "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(" or property "),t(l,{name:"publishScript"}),e(" is "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(". ")]),description:n(()=>[s("p",null,[e(" This task may be used to integrate a publish script into a Gradle build. The publish script shall be defined in the "),t(a,null,{default:n(()=>[e("package.json")]),_:1}),e(" file, and the "),t(l,{name:"publishScript"}),e(" property shall be set with the corresponding "),t(a,null,{default:n(()=>[e("npm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("pnpm")]),_:1}),e("/"),t(a,null,{default:n(()=>[e("yarn")]),_:1}),e(" command. This task depends on the "),t(o,{name:"assembleFrontend"}),e(" task, and is skipped either if the "),t(l,{name:"assembleScript"}),e(" property is "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(", or if the "),t(l,{name:"publishScript"}),e(" property is "),t(a,null,{default:n(()=>[e("null")]),_:1}),e(". Apart from direct execution, the task is also executed when the Gradle "),t(a,null,{default:n(()=>[e("publish")]),_:1}),e(" task is executed. ")])]),_:1})}}}),rt=s("p",null,"The plugin registers multiple tasks, that may have dependencies with each other, and also with:",-1),dt={class:"text-center"},M="Gradle tasks to run node, corepack, npm, pnpm, yarn commands",N="Gradle tasks and types provided by the plugin to run node/corepack/npm/pnpm/yarn: integration, dependencies, customization, recommendations",Ct=g({__name:"node-corepack-npm-pnpm-yarn-tasks",setup(d){const c=W(),p=`${c.public.canonicalBaseUrl}${c.public.paths.tasks}`;return me({link:[{rel:"canonical",href:p}]}),q({description:N,ogDescription:N,ogTitle:M,ogUrl:p,title:M}),(r,l)=>{const a=H,o=F,i=f,u=Z,_=Ue,m=ee,k=Ve,w=Be,$=Xe,S=Ke,C=et,G=ot,z=it,O=lt,E=se,Y=oe,J=ie,U=le,V=re,B=D,y=pe,X=ue;return h(),j("section",null,[t(a,null,{default:n(()=>[e("Tasks")]),_:1}),rt,s("ul",null,[s("li",null,[e(" Gradle lifecycle tasks defined in the "),t(o,{path:"/current/userguide/base_plugin.html"},{default:n(()=>[e("Gradle Base plugin")]),_:1}),e(": "),t(i,null,{default:n(()=>[e("clean")]),_:1}),e(", "),t(i,null,{default:n(()=>[e("assemble")]),_:1}),e(", "),t(i,null,{default:n(()=>[e("check")]),_:1}),e(". ")]),s("li",null,[e(" Tasks defined in the Gradle Publishing plugin: "),t(i,null,{default:n(()=>[e("publish")]),_:1}),e(". ")])]),t(u,null,{default:n(()=>[e("Dependency tree")]),_:1}),s("p",dt,[t(_,{class:"w-100"})]),t(u,null,{default:n(()=>[e("Reference")]),_:1}),s("section",null,[t(m,null,{default:n(()=>[e("Built-in tasks")]),_:1}),t(k),t(w),t($),t(S),t(C),t(G),t(z),t(O)]),s("section",null,[t(m,null,{default:n(()=>[e("Additional types")]),_:1}),t(E),t(Y),t(J),t(U),t(V)]),s("section",null,[t(m,{id:"tweaking-tasks"},{default:n(()=>[e(" Tweaking the built-in tasks "),t(B,{path:`${r.$config.public.paths.tasks}#app`,class:"small text-info"},{default:n(()=>[e("↑")]),_:1},8,["path"])]),_:1}),s("p",null,[e(" If you need to customize the plugin's built-in tasks (e.g. declare additional I/O or dependencies), it is important to conform to the "),t(o,{path:"/current/userguide/task_configuration_avoidance.html#sec:old_vs_new_configuration_api_overview"},{default:n(()=>[e("Configuration avoidance API")]),_:1}),e(": use references of task providers instead of references of tasks, and continue taking advantage of the lazy configuration strategy the plugin already implements. The examples below introduce the implementation expected with simple cases: ")]),t(X,{id:"lazy-configuration-examples"},{groovy:n(()=>[s("pre",null,[t(i,null,{default:n(()=>[t(y,null,{default:n(()=>[e(`// Configuring a predefined task.
// LEGACY SYNTAX: task 'installFrontend' is immediately created and configured, as well as task
// 'otherTask', even if both tasks are not executed.`)]),_:1}),e(`
installFrontend {
    dependsOn 'otherTask'
    inputs.files('package.json', 'package-lock.json')
}
`),t(y,null,{default:n(()=>[e(`// MODERN SYNTAX: task 'installFrontend' is created and configured only when Gradle is about to execute it.
// Consequently, task 'otherTask' is also created and configured later. Let's also reinforce this behaviour
// by using its provider to retrieve the task.`)]),_:1}),e(`
tasks.named('installFrontend') {
    dependsOn tasks.named('otherTask')
    inputs.files('package.json', 'package-lock.json')
}

`),t(y,null,{default:n(()=>[e(`// Defining a new task
// LEGACY SYNTAX: task 'eagerTask' is immediately created and configured, as well as task
// 'installFrontend', even if both tasks are not executed.`)]),_:1}),e(`
task eagerTask {
    dependsOn 'installFrontend'
}
`),t(y,null,{default:n(()=>[e(`// MODERN SYNTAX: task 'lazyTask' is created and configured only when Gradle is about to execute it.
// Consequently, task 'installFrontend' is also created and configured later. Let's also reinforce this
// behaviour by using its provider to retrieve the task.`)]),_:1}),e(`
tasks.register('lazyTask') {
    dependsOn tasks.named('installFrontend')
}`)]),_:1})])]),kotlin:n(()=>[s("pre",null,[t(i,null,{default:n(()=>[t(y,null,{default:n(()=>[e(`// Configuring a predefined task.
// LEGACY SYNTAX: task 'installFrontend' is immediately created and configured, as well as task
// 'otherTask', even if both tasks are not executed.`)]),_:1}),e(`
installFrontend {
    dependsOn("otherTask")
    inputs.files("package.json", "package-lock.json")
}
`),t(y,null,{default:n(()=>[e(`// MODERN SYNTAX: task 'installFrontend' is created and configured only when Gradle is about to execute it.
// Consequently, task 'otherTask' is also created and configured later.`)]),_:1}),e(`
tasks.named<InstallTask>("installFrontend") {
    dependsOn(tasks.named("otherTask"))
    inputs.files("package.json", "package-lock.json")
}

`),t(y,null,{default:n(()=>[e(`// Defining a new task
// LEGACY SYNTAX: task 'eagerTask' is immediately created and configured, as well as task
// 'installFrontend', even if both tasks are not executed.`)]),_:1}),e(`
task eagerTask {
    dependsOn("installFrontend")
}
`),t(y,null,{default:n(()=>[e(`// MODERN SYNTAX: task 'lazyTask' is created and configured only when Gradle is about to execute it.
// Consequently, task 'installFrontend' is also created and configured later. Let's also reinforce this
// behaviour by using its provider to retrieve the task.`)]),_:1}),e(`
tasks.register("lazyTask") {
    dependsOn(tasks.named("installFrontend"))
}`)]),_:1})])]),_:1}),s("p",null,[e(" If your application uses the legacy syntax, you may find further instructions to migrate to the modern syntax in this Gradle "),t(o,{path:"/current/userguide/task_configuration_avoidance.html#sec:task_configuration_avoidance_migration_guidelines"},{default:n(()=>[e("guide")]),_:1}),e(". ")])])])}}});export{Ct as default};
